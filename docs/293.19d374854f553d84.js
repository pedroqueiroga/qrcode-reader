"use strict";(self.webpackChunkqr_code_reader=self.webpackChunkqr_code_reader||[]).push([[293],{293:(To,Te,m)=>{function Ne(n,t,e,o,i,s,a){try{var l=n[s](a),c=l.value}catch(d){return void e(d)}l.done?t(c):Promise.resolve(c).then(o,i)}function B(n){return function(){var t=this,e=arguments;return new Promise(function(o,i){var s=n.apply(t,e);function a(c){Ne(s,o,i,a,l,"next",c)}function l(c){Ne(s,o,i,a,l,"throw",c)}a(void 0)})}}m.r(Te),m.d(Te,{ReaderComponent:()=>Oo});var z=m(755),r=m(902),Xt=m(579);class S extends Xt.x{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(t){const{hasError:e,_hasValue:o,_value:i,thrownError:s,isStopped:a,_isComplete:l}=this;e?t.error(s):(a||l)&&(o&&t.next(i),t.complete())}next(t){this.isStopped||(this._value=t,this._hasValue=!0)}complete(){const{_hasValue:t,_value:e,_isComplete:o}=this;o||(this._isComplete=!0,t&&super.next(e),super.complete())}}var xe=m(135);const Zt=["video"],Kt=["canvas"],en=["resultsPanel"],Ge="assets/wasm/index.js",Ie={audio:!1,video:!0},A={src:"",fps:30,vibrate:300,decode:"utf-8",isBeep:!0,constraints:Ie,canvasStyles:{font:"15px serif",lineWidth:1,strokeStyle:"green",fillStyle:"#55f02880"}},h=(n,t,e)=>{e?n.error(e):n.next(t),n.complete()},se=(n=!1)=>{if(!1===n)return;const t=new Audio("data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU"+Array(300).join("101"));t.oncanplaythrough=()=>{const e=t.play();e&&e.catch(o=>{})}},Qe=(n,t,e,o)=>{let i,s,a=t.width,l=t.height,c=a/l,d=parseInt(getComputedStyle(t).width),u=parseInt(getComputedStyle(t).height),_=d/u;e.innerHTML="",c>_?(i=d/a,s=d/c/l):(s=u/l,i=u*c/a);for(let V=0;V<n.length;V++){const y=n[V];let p=document.createElement("canvas"),C=p.getContext("2d",{willReadFrequently:!0}),R={},E=[],L=[],Q=0,j=0,$t=o?.font?.replace(/[^0-9]/g,"");/[0-9]/g.test($t)&&(Q=parseFloat($t),j=(i||1)*Q,Number.isNaN(j)&&(j=Q));const Fe=y.points;for(let f=0;f<Fe.length;f++){const re=Fe?.[f]?.x??0,ie=Fe?.[f]?.y??0;R[`x${f+1}`]=re,R[`y${f+1}`]=ie,E.push(re),L.push(ie)}let Re=Math.max(...E),w=Math.min(...E),we=Math.max(...L),O=Math.min(...L);p.setAttribute("class","qrcode-polygon"),c>_?(p.style.top=O*s+.5*(u-d/c)+"px",p.style.left=w*i+"px",p.width=(Re-w)*i,p.height=(we-O)*i):(p.style.top=O*s+"px",p.style.left=w*i+.5*(d-u*c)+"px",p.width=(Re-w)*s,p.height=(we-O)*s);for(const f in o)C[f]=o[f];const Oe=[];for(let f=0;f<E.length;f++)Oe.push((R[`x${f+1}`]-w)*s),Oe.push((R[`y${f+1}`]-O)*i);const q=Oe.slice(0);for(C.beginPath(),C.moveTo(q.shift(),q.shift());q.length;)C.lineTo(q.shift(),q.shift());if(C.closePath(),C.fill(),C.stroke(),Q){const f=document.createElement("div");f.setAttribute("class","qrcode-tooltip-temp"),f.innerText=y.value;const re=`<?xml version="1.0" encoding="utf-8"?><svg version="1.1" class="qrcode-tooltip-clipboard" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="${j}" height="${j}" x="0px" y="0px" viewBox="0 0 115.77 122.88" xml:space="preserve"><g><path d="M89.62,13.96v7.73h12.19h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02v0.02 v73.27v0.01h-0.02c-0.01,3.84-1.57,7.33-4.1,9.86c-2.51,2.5-5.98,4.06-9.82,4.07v0.02h-0.02h-61.7H40.1v-0.02 c-3.84-0.01-7.34-1.57-9.86-4.1c-2.5-2.51-4.06-5.98-4.07-9.82h-0.02v-0.02V92.51H13.96h-0.01v-0.02c-3.84-0.01-7.34-1.57-9.86-4.1 c-2.5-2.51-4.06-5.98-4.07-9.82H0v-0.02V13.96v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07V0h0.02h61.7 h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02V13.96L89.62,13.96z M79.04,21.69v-7.73v-0.02h0.02 c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01 c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v64.59v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h12.19V35.65 v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07v-0.02h0.02H79.04L79.04,21.69z M105.18,108.92V35.65v-0.02 h0.02c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01 c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v73.27v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h61.7h0.02 v0.02c0.91,0,1.75-0.39,2.37-1.01c0.61-0.61,1-1.46,1-2.37h-0.02V108.92L105.18,108.92z"></path></g></svg> `,ie=(new DOMParser).parseFromString(re,"application/xml"),Jt=f.ownerDocument.importNode(ie.documentElement,!0);f.appendChild(Jt),Jt.addEventListener("click",()=>window.navigator.clipboard.writeText(y.value));const T=document.createElement("div");T.setAttribute("class","qrcode-tooltip"),T.appendChild(f),s=u/l,i=u*c/a,T.style.fontSize=i*Q+"px",T.style.top=O*s+"px",T.style.left=w*i+.5*(d-u*c)+"px",T.style.width=(Re-w)*s+"px",T.style.height=(we-O)*s+"px";const Y=document.createElement("span");Y.innerText=y.value,Y.style.fontSize=i*Q+"px",Y.style.top=O*s+-20*s+"px",Y.style.left=w*i+.5*(d-u*c)+"px",e?.appendChild(T),e?.appendChild(Y)}e?.appendChild(p)}},Be=(n,t)=>new Promise((e,o)=>n.toBlob(i=>e(i),t)),Pe=(n=[],t,e=new S)=>(Promise.all(Object.assign([],n).map(o=>((n,t)=>{let e=t?.decode??A.decode,o=t?.canvasStyles??A.canvasStyles,i=t?.isBeep??A.isBeep;return new Promise((s,a)=>{const l=new FileReader;l.onload=()=>{const c={name:n.name,file:n,url:URL.createObjectURL(n)},d=new Image;d.setAttribute("crossOrigin","anonymous"),d.onload=B(function*(){const u=document.createElement("canvas");u.width=d.naturalWidth||d.width,u.height=d.naturalHeight||d.height;const _=u.getContext("2d");_.drawImage(d,0,0,u.width,u.height);const V=_.getImageData(0,0,u.width,u.height),y=yield zbarWasm.scanImageData(V);if(y?.length){y.forEach(E=>E.value=E.decode(e?.toLocaleLowerCase())),((n,t,e)=>{let o=t.getContext("2d",{willReadFrequently:!0});for(let i=0;i<n.length;i++){const s=n[i];let a={},l=[],c=[];const d=s.points;for(let p=0;p<d.length;p++){const C=d?.[p]?.x??0,R=d?.[p]?.y??0;a[`x${p+1}`]=C,a[`y${p+1}`]=R,l.push(C),c.push(R)}let u=Math.min(...l),_=Math.min(...c);for(const p in e)o[p]=e[p];o.font=e?.font??"15px serif",ln(o,s.value,u,_-5);const V=[];for(let p=0;p<l.length;p++)V.push(a[`x${p+1}`]),V.push(a[`y${p+1}`]);const y=V.slice(0);for(o.beginPath(),o.moveTo(y.shift(),y.shift());y.length;)o.lineTo(y.shift(),y.shift());o.closePath(),o.fill(),o.stroke()}})(y,u,o);const p=yield Be(u),C=URL.createObjectURL(p);s(Object.assign({},c,{data:y,url:C,canvas:u,file:(E=p,L=c.name,new File([E],L,{lastModified:(new Date).getTime(),type:E.type}))})),se(i)}else s(Object.assign({},c,{data:y,canvas:u}));var E,L}),d.src=c.url},l.onerror=c=>a(c),l.readAsDataURL(n)})})(o,t))).then(o=>{h(e,o)}).catch(o=>h(e,null,o)),e),ln=(n,t,e,o)=>{let i=1.2*n.measureText("M").width,s=t.split("\n");for(var a=0;a<s.length;++a)n.fillText(s[a],e,o),n.strokeText(s[a],e,o),o+=i},ke=n=>{Object.assign([],n.childNodes).forEach(t=>n.removeChild(t))},Ue=(n=300)=>{n&&dn()&&window?.navigator?.vibrate(n)},dn=()=>{const n=navigator.userAgent||navigator.vendor||window.opera;return!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(n)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(n.substr(0,4))||/^((?!chrome|android).)*safari/i.test(n))};let un=(()=>{class n{loadFiles(e=[]){const o=new S;return Promise.all(Object.assign([],e).map(i=>this.readAsDataURL(i))).then(i=>h(o,i)).catch(i=>h(o,null,i)),o}loadFilesToScan(e=[],o){return Pe(e,o)}readAsDataURL(e){return new Promise((o,i)=>{const s=new FileReader;s.onload=()=>{const a={name:e.name,file:e,url:URL.createObjectURL(e)};o(a)},s.onerror=a=>i(a),s.readAsDataURL(e)})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hn=(()=>{class n{constructor(e){this.renderer=e,this.event=new r.vpe,this.src=A.src,this.fps=A.fps,this.vibrate=A.vibrate,this.decode=A.decode,this.isBeep=A.isBeep,this.config=A,this.constraints=A.constraints,this.canvasStyles=A.canvasStyles,this.isStart=!1,this.isPause=!1,this.isLoading=!1,this.isTorch=!1,this.data=new xe.X([]),this.devices=new xe.X([]),this.deviceIndexActive=0,this.dataForResize=[],this.ready=new S,this.STATUS={startON:()=>this.isStart=!0,pauseON:()=>this.isPause=!0,loadingON:()=>this.isLoading=!0,startOFF:()=>this.isStart=!1,pauseOFF:()=>this.isPause=!1,loadingOFF:()=>this.isLoading=!1,torchOFF:()=>this.isTorch=!1}}ngOnInit(){this.overrideConfig(),((n,t)=>{const e=document.querySelectorAll('script[src="https://cdn.jsdelivr.net/npm/ngx-scanner-qrcode@1.4.2/wasm/index.js"]'),o=document.querySelectorAll('script[src="https://cdn.jsdelivr.net/npm/ngx-scanner-qrcode@latest/wasm/index.js"]');if(e.length||o.length)setTimeout(()=>h(n,!0),200);else{const i=document.querySelectorAll(`script[src="${Ge}"]`);if(1===i.length)setTimeout(()=>h(n,!0),200);else{i.forEach(a=>a.remove());const s=t.createElement("script");t.setAttribute(s,"type","text/javascript"),t.setAttribute(s,"src",Ge),t.appendChild(document.body,s),s.onload=()=>setTimeout(()=>h(n,!0),200),s.onerror=()=>setTimeout(()=>h(n,!1,!0),200)}}return n})(this.ready,this.renderer).subscribe(()=>{this.src&&this.loadImage(this.src),this.resize()})}start(e){const o=new S;return this.isStart?h(o,!1):this.safariWebRTC(o,e),o}stop(){this.STATUS.pauseOFF(),this.STATUS.startOFF(),this.STATUS.torchOFF(),this.STATUS.loadingOFF();const e=new S;try{clearInterval(this.rAF_ID),this.video.nativeElement.srcObject.getTracks().forEach(o=>{o.stop(),h(e,!0)}),ke(this.resultsPanel.nativeElement)}catch(o){h(e,!1,o)}return e}play(){const e=new S;return this.isPause?(this.video.nativeElement.play(),this.STATUS.pauseOFF(),this.requestAnimationFrame(90),h(e,!0)):h(e,!1),e}pause(){const e=new S;return this.isStart?(clearInterval(this.rAF_ID),this.video.nativeElement.pause(),this.STATUS.pauseON(),h(e,!0)):h(e,!1),e}playDevice(e,o=new S){const i=!this.isStart||this.getConstraints().deviceId!==e;switch(!0){case"null"===e||"undefined"===e||!e:stop(),this.stop(),h(o,!1);break;case e&&i:stop(),this.stop(),this.STATUS.loadingON(),this.deviceIndexActive=this.devices.value.findIndex(a=>a.deviceId===e);const s={...this.constraints,audio:!1,video:{deviceId:e,...this.constraints.video}};navigator.mediaDevices.getUserMedia(s).then(a=>{this.video.nativeElement.srcObject=a,this.video.nativeElement.onloadedmetadata=()=>{this.video.nativeElement.play(),this.requestAnimationFrame(),h(o,!0),this.STATUS.startON(),this.STATUS.loadingOFF()}}).catch(a=>{this.eventEmit(!1),h(o,!1,a),this.STATUS.startOFF(),this.STATUS.loadingOFF()});break;default:h(o,!1),this.STATUS.loadingOFF()}return o}loadImage(e){const o=new S;this.STATUS.startOFF(),this.STATUS.loadingON();const i=new Image;return i.setAttribute("crossOrigin","anonymous"),i.onload=()=>{this.drawImage(i,s=>{h(o,s),this.STATUS.startOFF(),this.STATUS.loadingOFF()})},i.src=e,o}torcher(){const e=this.applyConstraints({advanced:[{torch:this.isTorch}]});return e.subscribe(()=>!1,()=>this.isTorch=!this.isTorch),e}applyConstraints(e){const o=new S,s=this.video.nativeElement.srcObject.getVideoTracks()[0];return new window.ImageCapture(s).getPhotoCapabilities().then(B(function*(){yield s.applyConstraints(e),h(o,!0)})).catch(l=>{switch(l?.name){case"NotFoundError":case"DevicesNotFoundError":h(o,!1,"Required track is missing");break;case"NotReadableError":case"TrackStartError":h(o,!1,"Webcam or mic are already in use");break;case"OverconstrainedError":case"ConstraintNotSatisfiedError":h(o,!1,"Constraints can not be satisfied by avb. devices");break;case"NotAllowedError":case"PermissionDeniedError":h(o,!1,"Permission denied in browser");break;case"TypeError":h(o,!1,"Empty constraints object");break;default:h(o,!1,l)}}),o}getConstraints(){return this.video.nativeElement.srcObject?.getVideoTracks()[0]?.getConstraints()}download(e=`ngx-scanner-qrcode-${Date.now()}.png`){var o=this;const i=new S;return function(){var a=B(function*(){const c=((n,t)=>new File([n],t,{lastModified:(new Date).getTime(),type:n.type}))(yield Be(o.canvas.nativeElement),e);Pe([c],o.config,i).subscribe(d=>{d.forEach(u=>{const _=document.createElement("a");_.href=u.url,_.download=u.name,_.click(),_.remove()})})});return function(){return a.apply(this,arguments)}}()(),i}resize(){window.addEventListener("resize",()=>{this.dataForResize?.length&&Qe(this.dataForResize,this.canvas.nativeElement,this.resultsPanel.nativeElement,this.canvasStyles)})}overrideConfig(){this.config?.src&&(this.src=this.config.src),this.config?.fps&&(this.fps=this.config.fps),this.config?.vibrate&&(this.vibrate=this.config.vibrate),this.config?.decode&&(this.decode=this.config.decode),this.config?.isBeep&&(this.isBeep=this.config.isBeep),this.config?.constraints&&(this.constraints=((n,t,e)=>{if(t&&Object.keys(t[n]).length){for(const o in e){const i=JSON.parse(JSON.stringify({...t[n],[o]:e[o]}));t[n]=t[n].hasOwnProperty(o)?t[n]:i}return t[n]}return e})("constraints",this.config,Ie)),this.config?.canvasStyles&&(this.canvasStyles=this.config.canvasStyles)}safariWebRTC(e,o){this.STATUS.startOFF(),this.STATUS.loadingON(),navigator.mediaDevices.getUserMedia(this.constraints).then(i=>{i.getTracks().forEach(s=>s.stop()),this.loadAllDevices(e,o)}).catch(i=>{h(e,!1,i),this.STATUS.startOFF(),this.STATUS.loadingOFF()})}loadAllDevices(e,o){navigator.mediaDevices.enumerateDevices().then(i=>{let s=i.filter(a=>"videoinput"==a.kind);this.devices.next(s),s.length>0?(h(e,s),o?o(s):this.playDevice(s[0].deviceId)):(h(e,!1,"No camera detected."),this.STATUS.startOFF(),this.STATUS.loadingOFF())}).catch(i=>{h(e,!1,i),this.STATUS.startOFF(),this.STATUS.loadingOFF()})}drawImage(e,o=(()=>{})){var i=this;return B(function*(){const s=i.canvas.nativeElement,a=s.getContext("2d",{willReadFrequently:!0});e instanceof HTMLImageElement&&(s.width=e.naturalWidth,s.height=e.naturalHeight,e.style.visibility="",i.video.nativeElement.style.visibility="hidden",i.video.nativeElement.style.height=s.offsetHeight+"px"),e instanceof HTMLVideoElement&&(s.width=e.videoWidth,s.height=e.videoHeight,e.style.visibility="",i.canvas.nativeElement.style.visibility="hidden"),a.clearRect(0,0,s.width,s.height),a.drawImage(e,0,0,s.width,s.height);const l=a.getImageData(0,0,s.width,s.height);if(zbarWasm){const c=yield zbarWasm.scanImageData(l);if(c?.length){c.forEach(u=>u.value=u.decode(i.decode?.toLocaleLowerCase())),Qe(c,Object.freeze(i.canvas.nativeElement),i.resultsPanel.nativeElement,i.canvasStyles);const d=()=>{i.eventEmit(c),i.dataForResize=c};e instanceof HTMLImageElement&&(o(!0),d(),Ue(i.vibrate),se(i.isBeep)),e instanceof HTMLVideoElement&&(d(),Ue(i.vibrate),se(i.isBeep))}else o(!1),ke(i.resultsPanel.nativeElement),i.dataForResize=c}else console.error("ngx-scanner-qrcode wasm is not found!"),o(!1)})()}eventEmit(e=!1){!1!==e&&this.data.next(e||{data:null}),!1!==e&&this.event.emit(e||{data:null})}requestAnimationFrame(e=0){this.rAF_ID=setInterval(()=>{this.video.nativeElement.readyState===this.video.nativeElement.HAVE_ENOUGH_DATA&&(e=0,this.drawImage(this.video.nativeElement))},e||this.fps)}get isReady(){return this.ready}ngOnDestroy(){this.pause()}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(r.Qsj))},n.\u0275cmp=r.Xpm({type:n,selectors:[["ngx-scanner-qrcode"]],viewQuery:function(e,o){if(1&e&&(r.Gf(Zt,5),r.Gf(Kt,5),r.Gf(en,5)),2&e){let i;r.iGM(i=r.CRH())&&(o.video=i.first),r.iGM(i=r.CRH())&&(o.canvas=i.first),r.iGM(i=r.CRH())&&(o.resultsPanel=i.first)}},hostAttrs:[1,"ngx-scanner-qrcode"],inputs:{src:"src",fps:"fps",vibrate:"vibrate",decode:"decode",isBeep:"isBeep",config:"config",constraints:"constraints",canvasStyles:"canvasStyles"},outputs:{event:"event"},exportAs:["scanner"],decls:6,vars:0,consts:[[1,"origin-overlay"],["resultsPanel",""],[1,"origin-canvas"],["canvas",""],["playsinline","",1,"origin-video"],["video",""]],template:function(e,o){1&e&&r._UZ(0,"div",0,1)(2,"canvas",2,3)(4,"video",4,5)},styles:[".ngx-scanner-qrcode{display:block;position:relative}.origin-overlay{width:100%;position:absolute}.origin-overlay span{z-index:2;color:red;text-align:left;position:absolute}.origin-overlay .qrcode-polygon{z-index:1;position:absolute}.origin-canvas{width:100%;position:absolute}.origin-video{width:100%;background-color:#262626}.qrcode-tooltip{z-index:3;position:absolute}.qrcode-tooltip:hover .qrcode-tooltip-temp{display:block;position:absolute}.qrcode-tooltip-temp{bottom:0;left:50%;padding:5px;color:#fff;text-align:left;display:none;max-width:450px;border-radius:5px;width:max-content;word-wrap:break-word;transform:translate(-50%);transform-style:preserve-3d;background-color:#000000d0;box-shadow:1px 1px 20px #000000e0}.qrcode-tooltip-temp .qrcode-tooltip-clipboard{cursor:pointer;margin-left:5px;fill:#fff}.qrcode-tooltip-temp .qrcode-tooltip-clipboard:active{fill:#afafaf}\n"],encapsulation:2}),n})(),mn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({providers:[un]}),n})();var gn=m(300),_n=m(698);m(76),m(751),m(742),m(421),m(669),m(403),m(268),m(810),m(4);let Le=(()=>{class n{constructor(e,o){this._renderer=e,this._elementRef=o,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(e,o){this._renderer.setProperty(this._elementRef.nativeElement,e,o)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(r.Qsj),r.Y36(r.SBq))},n.\u0275dir=r.lG2({type:n}),n})(),N=(()=>{class n extends Le{}return n.\u0275fac=function(){let t;return function(o){return(t||(t=r.n5z(n)))(o||n)}}(),n.\u0275dir=r.lG2({type:n,features:[r.qOj]}),n})();const b=new r.OlP("NgValueAccessor"),I=new r.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>K}),K="always";let Rt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({}),n})();const uo={provide:b,useExisting:(0,r.Gpc)(()=>Ee),multi:!0};function It(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let Ee=(()=>{class n extends N{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const i=It(this._getOptionId(e),e);this.setProperty("value",i)}registerOnChange(e){this.onChange=o=>{this.value=this._getOptionValue(o),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const o of this._optionMap.keys())if(this._compareWith(this._optionMap.get(o),e))return o;return null}_getOptionValue(e){const o=function ho(n){return n.split(":")[0]}(e);return this._optionMap.has(o)?this._optionMap.get(o):e}}return n.\u0275fac=function(){let t;return function(o){return(t||(t=r.n5z(n)))(o||n)}}(),n.\u0275dir=r.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,o){1&e&&r.NdJ("change",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([uo]),r.qOj]}),n})(),Qt=(()=>{class n{constructor(e,o,i){this._element=e,this._renderer=o,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(It(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(Ee,9))},n.\u0275dir=r.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const po={provide:b,useExisting:(0,r.Gpc)(()=>De),multi:!0};function Bt(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let De=(()=>{class n extends N{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let o;if(this.value=e,Array.isArray(e)){const i=e.map(s=>this._getOptionId(s));o=(s,a)=>{s._setSelected(i.indexOf(a.toString())>-1)}}else o=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(o)}registerOnChange(e){this.onChange=o=>{const i=[],s=o.selectedOptions;if(void 0!==s){const a=s;for(let l=0;l<a.length;l++){const d=this._getOptionValue(a[l].value);i.push(d)}}else{const a=o.options;for(let l=0;l<a.length;l++){const c=a[l];if(c.selected){const d=this._getOptionValue(c.value);i.push(d)}}}this.value=i,e(i)}}_registerOption(e){const o=(this._idCounter++).toString();return this._optionMap.set(o,e),o}_getOptionId(e){for(const o of this._optionMap.keys())if(this._compareWith(this._optionMap.get(o)._value,e))return o;return null}_getOptionValue(e){const o=function fo(n){return n.split(":")[0]}(e);return this._optionMap.has(o)?this._optionMap.get(o)._value:e}}return n.\u0275fac=function(){let t;return function(o){return(t||(t=r.n5z(n)))(o||n)}}(),n.\u0275dir=r.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,o){1&e&&r.NdJ("change",function(s){return o.onChange(s.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([po]),r.qOj]}),n})(),Pt=(()=>{class n{constructor(e,o,i){this._element=e,this._renderer=o,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(Bt(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(Bt(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(De,9))},n.\u0275dir=r.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),Vo=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({imports:[Rt]}),n})(),Eo=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:I,useValue:e.callSetDisabledState??K}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({imports:[Vo]}),n})();var Do=m(804),Mo=m(729);const Fo=["action"],Ro=["selectDevice"];function wo(n,t){if(1&n&&(r.TgZ(0,"option",6),r._uU(1),r.qZA()),2&n){const e=t.$implicit;r.Q6J("value",e.deviceId),r.xp6(1),r.Oqu(e.label)}}let Oo=(()=>{class n{constructor(e,o){this.router=e,this.textService=o,this.title="qr-code-reader"}ngAfterViewInit(){this.qrcodeComponent?.devices.pipe((0,gn.h)(e=>e.length>0),(0,_n.q)(1)).subscribe(e=>{const o=e.find(i=>i.label.includes("back"));o&&this.selectDevice&&(this.selectDevice.nativeElement.value=o.deviceId,this.selectDevice.nativeElement.dispatchEvent(new Event("change")))}),this.qrcodeComponent?.start()}onEvent(e,o){var i=this;return B(function*(){const s=e[0].value;s&&(o.pause(),i.textService.text=s,yield i.router.navigateByUrl("only-text"))})()}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(Do.F0),r.Y36(Mo.N))},n.\u0275cmp=r.Xpm({type:n,selectors:[["app-root"]],viewQuery:function(e,o){if(1&e&&(r.Gf(Fo,5),r.Gf(Ro,5)),2&e){let i;r.iGM(i=r.CRH())&&(o.qrcodeComponent=i.first),r.iGM(i=r.CRH())&&(o.selectDevice=i.first)}},standalone:!0,features:[r.jDz],decls:7,vars:1,consts:[["for","select-device"],["id","select-device","autofocus","","tabindex","1","name","Selecionar c\xe2mera",3,"change"],["selectDevice",""],[3,"value",4,"ngFor","ngForOf"],[3,"event"],["action","scanner"],[3,"value"]],template:function(e,o){if(1&e){const i=r.EpF();r.TgZ(0,"label",0),r._uU(1,"Selecionar c\xe2mera:"),r.qZA(),r.TgZ(2,"select",1,2),r.NdJ("change",function(){r.CHM(i);const a=r.MAs(3),l=r.MAs(6);return r.KtG(l.playDevice(a.value))}),r.YNc(4,wo,2,2,"option",3),r.qZA(),r.TgZ(5,"ngx-scanner-qrcode",4,5),r.NdJ("event",function(a){r.CHM(i);const l=r.MAs(6);return r.KtG(o.onEvent(a,l))}),r.qZA()}if(2&e){const i=r.MAs(6);r.xp6(4),r.Q6J("ngForOf",i.devices.value)}},dependencies:[z.ez,z.sg,mn,hn,Eo,Qt,Pt]}),n})()}}]);