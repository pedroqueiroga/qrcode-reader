"use strict";(self.webpackChunkqr_code_reader=self.webpackChunkqr_code_reader||[]).push([[293],{293:(To,Ne,m)=>{m.r(Ne),m.d(Ne,{ReaderComponent:()=>Oo});var Y=m(755);function xe(n,t,e,o,i,s,a){try{var l=n[s](a),c=l.value}catch(d){return void e(d)}l.done?t(c):Promise.resolve(c).then(o,i)}function z(n){return function(){var t=this,e=arguments;return new Promise(function(o,i){var s=n.apply(t,e);function a(c){xe(s,o,i,a,l,"next",c)}function l(c){xe(s,o,i,a,l,"throw",c)}a(void 0)})}}var r=m(902),Zt=m(579);class S extends Zt.x{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(t){const{hasError:e,_hasValue:o,_value:i,thrownError:s,isStopped:a,_isComplete:l}=this;e?t.error(s):(a||l)&&(o&&t.next(i),t.complete())}next(t){this.isStopped||(this._value=t,this._hasValue=!0)}complete(){const{_hasValue:t,_value:e,_isComplete:o}=this;o||(this._isComplete=!0,t&&super.next(e),super.complete())}}var Ge=m(135);const Kt=["video"],en=["canvas"],tn=["resultsPanel"],Qe="assets/wasm/index.js",Ie={audio:!1,video:!0},A={src:"",fps:30,vibrate:300,decode:"utf-8",isBeep:!0,constraints:Ie,canvasStyles:{font:"15px serif",lineWidth:1,strokeStyle:"green",fillStyle:"#55f02880"}},h=(n,t,e)=>{e?n.error(e):n.next(t),n.complete()},ae=(n=!1)=>{if(!1===n)return;const t=new Audio("data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU"+Array(300).join("101"));t.oncanplaythrough=()=>{const e=t.play();e&&e.catch(o=>{})}},Be=(n,t,e,o)=>{let i,s,a=t.width,l=t.height,c=a/l,d=parseInt(getComputedStyle(t).width),u=parseInt(getComputedStyle(t).height),_=d/u;e.innerHTML="",c>_?(i=d/a,s=d/c/l):(s=u/l,i=u*c/a);for(let V=0;V<n.length;V++){const y=n[V];let p=document.createElement("canvas"),C=p.getContext("2d",{willReadFrequently:!0}),R={},D=[],H=[],I=0,L=0,Jt=o?.font?.replace(/[^0-9]/g,"");/[0-9]/g.test(Jt)&&(I=parseFloat(Jt),L=(i||1)*I,Number.isNaN(L)&&(L=I));const Re=y.points;for(let f=0;f<Re.length;f++){const ie=Re?.[f]?.x??0,se=Re?.[f]?.y??0;R[`x${f+1}`]=ie,R[`y${f+1}`]=se,D.push(ie),H.push(se)}let we=Math.max(...D),w=Math.min(...D),Oe=Math.max(...H),O=Math.min(...H);p.setAttribute("class","qrcode-polygon"),c>_?(p.style.top=O*s+.5*(u-d/c)+"px",p.style.left=w*i+"px",p.width=(we-w)*i,p.height=(Oe-O)*i):(p.style.top=O*s+"px",p.style.left=w*i+.5*(d-u*c)+"px",p.width=(we-w)*s,p.height=(Oe-O)*s);for(const f in o)C[f]=o[f];const Te=[];for(let f=0;f<D.length;f++)Te.push((R[`x${f+1}`]-w)*s),Te.push((R[`y${f+1}`]-O)*i);const j=Te.slice(0);for(C.beginPath(),C.moveTo(j.shift(),j.shift());j.length;)C.lineTo(j.shift(),j.shift());if(C.closePath(),C.fill(),C.stroke(),I){const f=document.createElement("div");f.setAttribute("class","qrcode-tooltip-temp"),f.innerText=y.value;const ie=`<?xml version="1.0" encoding="utf-8"?><svg version="1.1" class="qrcode-tooltip-clipboard" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="${L}" height="${L}" x="0px" y="0px" viewBox="0 0 115.77 122.88" xml:space="preserve"><g><path d="M89.62,13.96v7.73h12.19h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02v0.02 v73.27v0.01h-0.02c-0.01,3.84-1.57,7.33-4.1,9.86c-2.51,2.5-5.98,4.06-9.82,4.07v0.02h-0.02h-61.7H40.1v-0.02 c-3.84-0.01-7.34-1.57-9.86-4.1c-2.5-2.51-4.06-5.98-4.07-9.82h-0.02v-0.02V92.51H13.96h-0.01v-0.02c-3.84-0.01-7.34-1.57-9.86-4.1 c-2.5-2.51-4.06-5.98-4.07-9.82H0v-0.02V13.96v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07V0h0.02h61.7 h0.01v0.02c3.85,0.01,7.34,1.57,9.86,4.1c2.5,2.51,4.06,5.98,4.07,9.82h0.02V13.96L89.62,13.96z M79.04,21.69v-7.73v-0.02h0.02 c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01 c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v64.59v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h12.19V35.65 v-0.01h0.02c0.01-3.85,1.58-7.34,4.1-9.86c2.51-2.5,5.98-4.06,9.82-4.07v-0.02h0.02H79.04L79.04,21.69z M105.18,108.92V35.65v-0.02 h0.02c0-0.91-0.39-1.75-1.01-2.37c-0.61-0.61-1.46-1-2.37-1v0.02h-0.01h-61.7h-0.02v-0.02c-0.91,0-1.75,0.39-2.37,1.01 c-0.61,0.61-1,1.46-1,2.37h0.02v0.01v73.27v0.02h-0.02c0,0.91,0.39,1.75,1.01,2.37c0.61,0.61,1.46,1,2.37,1v-0.02h0.01h61.7h0.02 v0.02c0.91,0,1.75-0.39,2.37-1.01c0.61-0.61,1-1.46,1-2.37h-0.02V108.92L105.18,108.92z"></path></g></svg> `,se=(new DOMParser).parseFromString(ie,"application/xml"),Xt=f.ownerDocument.importNode(se.documentElement,!0);f.appendChild(Xt),Xt.addEventListener("click",()=>window.navigator.clipboard.writeText(y.value));const T=document.createElement("div");T.setAttribute("class","qrcode-tooltip"),T.appendChild(f),s=u/l,i=u*c/a,T.style.fontSize=i*I+"px",T.style.top=O*s+"px",T.style.left=w*i+.5*(d-u*c)+"px",T.style.width=(we-w)*s+"px",T.style.height=(Oe-O)*s+"px";const q=document.createElement("span");q.innerText=y.value,q.style.fontSize=i*I+"px",q.style.top=O*s+-20*s+"px",q.style.left=w*i+.5*(d-u*c)+"px",e?.appendChild(T),e?.appendChild(q)}e?.appendChild(p)}},Pe=(n,t)=>new Promise((e,o)=>n.toBlob(i=>e(i),t)),ke=(n=[],t,e=new S)=>(Promise.all(Object.assign([],n).map(o=>((n,t)=>{let e=t?.decode??A.decode,o=t?.canvasStyles??A.canvasStyles,i=t?.isBeep??A.isBeep;return new Promise((s,a)=>{const l=new FileReader;l.onload=()=>{const c={name:n.name,file:n,url:URL.createObjectURL(n)},d=new Image;d.setAttribute("crossOrigin","anonymous"),d.onload=z(function*(){const u=document.createElement("canvas");u.width=d.naturalWidth||d.width,u.height=d.naturalHeight||d.height;const _=u.getContext("2d");_.drawImage(d,0,0,u.width,u.height);const V=_.getImageData(0,0,u.width,u.height),y=yield zbarWasm.scanImageData(V);if(y?.length){y.forEach(D=>D.value=D.decode(e?.toLocaleLowerCase())),((n,t,e)=>{let o=t.getContext("2d",{willReadFrequently:!0});for(let i=0;i<n.length;i++){const s=n[i];let a={},l=[],c=[];const d=s.points;for(let p=0;p<d.length;p++){const C=d?.[p]?.x??0,R=d?.[p]?.y??0;a[`x${p+1}`]=C,a[`y${p+1}`]=R,l.push(C),c.push(R)}let u=Math.min(...l),_=Math.min(...c);for(const p in e)o[p]=e[p];o.font=e?.font??"15px serif",cn(o,s.value,u,_-5);const V=[];for(let p=0;p<l.length;p++)V.push(a[`x${p+1}`]),V.push(a[`y${p+1}`]);const y=V.slice(0);for(o.beginPath(),o.moveTo(y.shift(),y.shift());y.length;)o.lineTo(y.shift(),y.shift());o.closePath(),o.fill(),o.stroke()}})(y,u,o);const p=yield Pe(u),C=URL.createObjectURL(p);s(Object.assign({},c,{data:y,url:C,canvas:u,file:(D=p,H=c.name,new File([D],H,{lastModified:(new Date).getTime(),type:D.type}))})),ae(i)}else s(Object.assign({},c,{data:y,canvas:u}));var D,H}),d.src=c.url},l.onerror=c=>a(c),l.readAsDataURL(n)})})(o,t))).then(o=>{h(e,o)}).catch(o=>h(e,null,o)),e),cn=(n,t,e,o)=>{let i=1.2*n.measureText("M").width,s=t.split("\n");for(var a=0;a<s.length;++a)n.fillText(s[a],e,o),n.strokeText(s[a],e,o),o+=i},Ue=n=>{Object.assign([],n.childNodes).forEach(t=>n.removeChild(t))},He=(n=300)=>{n&&un()&&window?.navigator?.vibrate(n)},un=()=>{const n=navigator.userAgent||navigator.vendor||window.opera;return!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(n)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(n.substr(0,4))||/^((?!chrome|android).)*safari/i.test(n))};let hn=(()=>{class n{loadFiles(e=[]){const o=new S;return Promise.all(Object.assign([],e).map(i=>this.readAsDataURL(i))).then(i=>h(o,i)).catch(i=>h(o,null,i)),o}loadFilesToScan(e=[],o){return ke(e,o)}readAsDataURL(e){return new Promise((o,i)=>{const s=new FileReader;s.onload=()=>{const a={name:e.name,file:e,url:URL.createObjectURL(e)};o(a)},s.onerror=a=>i(a),s.readAsDataURL(e)})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pn=(()=>{class n{constructor(e){this.renderer=e,this.event=new r.vpe,this.src=A.src,this.fps=A.fps,this.vibrate=A.vibrate,this.decode=A.decode,this.isBeep=A.isBeep,this.config=A,this.constraints=A.constraints,this.canvasStyles=A.canvasStyles,this.isStart=!1,this.isPause=!1,this.isLoading=!1,this.isTorch=!1,this.data=new Ge.X([]),this.devices=new Ge.X([]),this.deviceIndexActive=0,this.dataForResize=[],this.ready=new S,this.STATUS={startON:()=>this.isStart=!0,pauseON:()=>this.isPause=!0,loadingON:()=>this.isLoading=!0,startOFF:()=>this.isStart=!1,pauseOFF:()=>this.isPause=!1,loadingOFF:()=>this.isLoading=!1,torchOFF:()=>this.isTorch=!1}}ngOnInit(){this.overrideConfig(),((n,t)=>{const e=document.querySelectorAll('script[src="https://cdn.jsdelivr.net/npm/ngx-scanner-qrcode@1.4.2/wasm/index.js"]'),o=document.querySelectorAll('script[src="https://cdn.jsdelivr.net/npm/ngx-scanner-qrcode@latest/wasm/index.js"]');if(e.length||o.length)setTimeout(()=>h(n,!0),200);else{const i=document.querySelectorAll(`script[src="${Qe}"]`);if(1===i.length)setTimeout(()=>h(n,!0),200);else{i.forEach(a=>a.remove());const s=t.createElement("script");t.setAttribute(s,"type","text/javascript"),t.setAttribute(s,"src",Qe),t.appendChild(document.body,s),s.onload=()=>setTimeout(()=>h(n,!0),200),s.onerror=()=>setTimeout(()=>h(n,!1,!0),200)}}return n})(this.ready,this.renderer).subscribe(()=>{this.src&&this.loadImage(this.src),this.resize()})}start(e){const o=new S;return this.isStart?h(o,!1):this.safariWebRTC(o,e),o}stop(){this.STATUS.pauseOFF(),this.STATUS.startOFF(),this.STATUS.torchOFF(),this.STATUS.loadingOFF();const e=new S;try{clearInterval(this.rAF_ID),this.video.nativeElement.srcObject.getTracks().forEach(o=>{o.stop(),h(e,!0)}),Ue(this.resultsPanel.nativeElement)}catch(o){h(e,!1,o)}return e}play(){const e=new S;return this.isPause?(this.video.nativeElement.play(),this.STATUS.pauseOFF(),this.requestAnimationFrame(90),h(e,!0)):h(e,!1),e}pause(){const e=new S;return this.isStart?(clearInterval(this.rAF_ID),this.video.nativeElement.pause(),this.STATUS.pauseON(),h(e,!0)):h(e,!1),e}playDevice(e,o=new S){const i=!this.isStart||this.getConstraints().deviceId!==e;switch(!0){case"null"===e||"undefined"===e||!e:stop(),this.stop(),h(o,!1);break;case e&&i:stop(),this.stop(),this.STATUS.loadingON(),this.deviceIndexActive=this.devices.value.findIndex(a=>a.deviceId===e);const s={...this.constraints,audio:!1,video:{deviceId:e,...this.constraints.video}};navigator.mediaDevices.getUserMedia(s).then(a=>{this.video.nativeElement.srcObject=a,this.video.nativeElement.onloadedmetadata=()=>{this.video.nativeElement.play(),this.requestAnimationFrame(),h(o,!0),this.STATUS.startON(),this.STATUS.loadingOFF()}}).catch(a=>{this.eventEmit(!1),h(o,!1,a),this.STATUS.startOFF(),this.STATUS.loadingOFF()});break;default:h(o,!1),this.STATUS.loadingOFF()}return o}loadImage(e){const o=new S;this.STATUS.startOFF(),this.STATUS.loadingON();const i=new Image;return i.setAttribute("crossOrigin","anonymous"),i.onload=()=>{this.drawImage(i,s=>{h(o,s),this.STATUS.startOFF(),this.STATUS.loadingOFF()})},i.src=e,o}torcher(){const e=this.applyConstraints({advanced:[{torch:this.isTorch}]});return e.subscribe(()=>!1,()=>this.isTorch=!this.isTorch),e}applyConstraints(e){const o=new S,s=this.video.nativeElement.srcObject.getVideoTracks()[0];return new window.ImageCapture(s).getPhotoCapabilities().then(z(function*(){yield s.applyConstraints(e),h(o,!0)})).catch(l=>{switch(l?.name){case"NotFoundError":case"DevicesNotFoundError":h(o,!1,"Required track is missing");break;case"NotReadableError":case"TrackStartError":h(o,!1,"Webcam or mic are already in use");break;case"OverconstrainedError":case"ConstraintNotSatisfiedError":h(o,!1,"Constraints can not be satisfied by avb. devices");break;case"NotAllowedError":case"PermissionDeniedError":h(o,!1,"Permission denied in browser");break;case"TypeError":h(o,!1,"Empty constraints object");break;default:h(o,!1,l)}}),o}getConstraints(){return this.video.nativeElement.srcObject?.getVideoTracks()[0]?.getConstraints()}download(e=`ngx-scanner-qrcode-${Date.now()}.png`){var o=this;const i=new S;return function(){var a=z(function*(){const c=((n,t)=>new File([n],t,{lastModified:(new Date).getTime(),type:n.type}))(yield Pe(o.canvas.nativeElement),e);ke([c],o.config,i).subscribe(d=>{d.forEach(u=>{const _=document.createElement("a");_.href=u.url,_.download=u.name,_.click(),_.remove()})})});return function(){return a.apply(this,arguments)}}()(),i}resize(){window.addEventListener("resize",()=>{this.dataForResize?.length&&Be(this.dataForResize,this.canvas.nativeElement,this.resultsPanel.nativeElement,this.canvasStyles)})}overrideConfig(){this.config?.src&&(this.src=this.config.src),this.config?.fps&&(this.fps=this.config.fps),this.config?.vibrate&&(this.vibrate=this.config.vibrate),this.config?.decode&&(this.decode=this.config.decode),this.config?.isBeep&&(this.isBeep=this.config.isBeep),this.config?.constraints&&(this.constraints=((n,t,e)=>{if(t&&Object.keys(t[n]).length){for(const o in e){const i=JSON.parse(JSON.stringify({...t[n],[o]:e[o]}));t[n]=t[n].hasOwnProperty(o)?t[n]:i}return t[n]}return e})("constraints",this.config,Ie)),this.config?.canvasStyles&&(this.canvasStyles=this.config.canvasStyles)}safariWebRTC(e,o){this.STATUS.startOFF(),this.STATUS.loadingON(),navigator.mediaDevices.getUserMedia(this.constraints).then(i=>{i.getTracks().forEach(s=>s.stop()),this.loadAllDevices(e,o)}).catch(i=>{h(e,!1,i),this.STATUS.startOFF(),this.STATUS.loadingOFF()})}loadAllDevices(e,o){navigator.mediaDevices.enumerateDevices().then(i=>{let s=i.filter(a=>"videoinput"==a.kind);this.devices.next(s),s.length>0?(h(e,s),o?o(s):this.playDevice(s[0].deviceId)):(h(e,!1,"No camera detected."),this.STATUS.startOFF(),this.STATUS.loadingOFF())}).catch(i=>{h(e,!1,i),this.STATUS.startOFF(),this.STATUS.loadingOFF()})}drawImage(e,o=(()=>{})){var i=this;return z(function*(){const s=i.canvas.nativeElement,a=s.getContext("2d",{willReadFrequently:!0});e instanceof HTMLImageElement&&(s.width=e.naturalWidth,s.height=e.naturalHeight,e.style.visibility="",i.video.nativeElement.style.visibility="hidden",i.video.nativeElement.style.height=s.offsetHeight+"px"),e instanceof HTMLVideoElement&&(s.width=e.videoWidth,s.height=e.videoHeight,e.style.visibility="",i.canvas.nativeElement.style.visibility="hidden"),a.clearRect(0,0,s.width,s.height),a.drawImage(e,0,0,s.width,s.height);const l=a.getImageData(0,0,s.width,s.height);if(zbarWasm){const c=yield zbarWasm.scanImageData(l);if(c?.length){c.forEach(u=>u.value=u.decode(i.decode?.toLocaleLowerCase())),Be(c,Object.freeze(i.canvas.nativeElement),i.resultsPanel.nativeElement,i.canvasStyles);const d=()=>{i.eventEmit(c),i.dataForResize=c};e instanceof HTMLImageElement&&(o(!0),d(),He(i.vibrate),ae(i.isBeep)),e instanceof HTMLVideoElement&&(d(),He(i.vibrate),ae(i.isBeep))}else o(!1),Ue(i.resultsPanel.nativeElement),i.dataForResize=c}else console.error("ngx-scanner-qrcode wasm is not found!"),o(!1)})()}eventEmit(e=!1){!1!==e&&this.data.next(e||{data:null}),!1!==e&&this.event.emit(e||{data:null})}requestAnimationFrame(e=0){this.rAF_ID=setInterval(()=>{this.video.nativeElement.readyState===this.video.nativeElement.HAVE_ENOUGH_DATA&&(e=0,this.drawImage(this.video.nativeElement))},e||this.fps)}get isReady(){return this.ready}ngOnDestroy(){this.pause()}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(r.Qsj))},n.\u0275cmp=r.Xpm({type:n,selectors:[["ngx-scanner-qrcode"]],viewQuery:function(e,o){if(1&e&&(r.Gf(Kt,5),r.Gf(en,5),r.Gf(tn,5)),2&e){let i;r.iGM(i=r.CRH())&&(o.video=i.first),r.iGM(i=r.CRH())&&(o.canvas=i.first),r.iGM(i=r.CRH())&&(o.resultsPanel=i.first)}},hostAttrs:[1,"ngx-scanner-qrcode"],inputs:{src:"src",fps:"fps",vibrate:"vibrate",decode:"decode",isBeep:"isBeep",config:"config",constraints:"constraints",canvasStyles:"canvasStyles"},outputs:{event:"event"},exportAs:["scanner"],decls:6,vars:0,consts:[[1,"origin-overlay"],["resultsPanel",""],[1,"origin-canvas"],["canvas",""],["playsinline","",1,"origin-video"],["video",""]],template:function(e,o){1&e&&r._UZ(0,"div",0,1)(2,"canvas",2,3)(4,"video",4,5)},styles:[".ngx-scanner-qrcode{display:block;position:relative}.origin-overlay{width:100%;position:absolute}.origin-overlay span{z-index:2;color:red;text-align:left;position:absolute}.origin-overlay .qrcode-polygon{z-index:1;position:absolute}.origin-canvas{width:100%;position:absolute}.origin-video{width:100%;background-color:#262626}.qrcode-tooltip{z-index:3;position:absolute}.qrcode-tooltip:hover .qrcode-tooltip-temp{display:block;position:absolute}.qrcode-tooltip-temp{bottom:0;left:50%;padding:5px;color:#fff;text-align:left;display:none;max-width:450px;border-radius:5px;width:max-content;word-wrap:break-word;transform:translate(-50%);transform-style:preserve-3d;background-color:#000000d0;box-shadow:1px 1px 20px #000000e0}.qrcode-tooltip-temp .qrcode-tooltip-clipboard{cursor:pointer;margin-left:5px;fill:#fff}.qrcode-tooltip-temp .qrcode-tooltip-clipboard:active{fill:#afafaf}\n"],encapsulation:2}),n})(),gn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({providers:[hn]}),n})();var _n=m(300),yn=m(698),vn=m(76),Cn=m(751),Sn=m(742),An=m(421),Vn=m(669),bn=m(403),Dn=m(268),En=m(810),Fn=m(4);let je=(()=>{class n{constructor(e,o){this._renderer=e,this._elementRef=o,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(e,o){this._renderer.setProperty(this._elementRef.nativeElement,e,o)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(r.Qsj),r.Y36(r.SBq))},n.\u0275dir=r.lG2({type:n}),n})(),N=(()=>{class n extends je{}return n.\u0275fac=function(){let t;return function(o){return(t||(t=r.n5z(n)))(o||n)}}(),n.\u0275dir=r.lG2({type:n,features:[r.qOj]}),n})();const b=new r.OlP("NgValueAccessor"),wn={provide:b,useExisting:(0,r.Gpc)(()=>ce),multi:!0},Tn=new r.OlP("CompositionEventMode");let ce=(()=>{class n extends je{constructor(e,o,i){super(e,o),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function On(){const n=(0,Y.q)()?(0,Y.q)().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(Tn,8))},n.\u0275dir=r.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,o){1&e&&r.NdJ("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},features:[r._Bn([wn]),r.qOj]}),n})();const g=new r.OlP("NgValidators"),M=new r.OlP("NgAsyncValidators");function tt(n){return null!=n}function nt(n){return(0,r.QGY)(n)?(0,vn.D)(n):n}function ot(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function rt(n,t){return t.map(e=>e(n))}function it(n){return n.map(t=>function xn(n){return!n.validate}(t)?t:e=>t.validate(e))}function de(n){return null!=n?function st(n){if(!n)return null;const t=n.filter(tt);return 0==t.length?null:function(e){return ot(rt(e,t))}}(it(n)):null}function ue(n){return null!=n?function at(n){if(!n)return null;const t=n.filter(tt);return 0==t.length?null:function(e){return function Mn(...n){const t=(0,Vn.jO)(n),{args:e,keys:o}=(0,Sn.D)(n),i=new Cn.y(s=>{const{length:a}=e;if(!a)return void s.complete();const l=new Array(a);let c=a,d=a;for(let u=0;u<a;u++){let _=!1;(0,An.Xf)(e[u]).subscribe((0,bn.x)(s,V=>{_||(_=!0,d--),l[u]=V},()=>c--,void 0,()=>{(!c||!_)&&(d||s.next(o?(0,En.n)(o,l):l),s.complete())}))}});return t?i.pipe((0,Dn.Z)(t)):i}(rt(e,t).map(nt)).pipe((0,Fn.U)(ot))}}(it(n)):null}function lt(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function he(n){return n?Array.isArray(n)?n:[n]:[]}function $(n,t){return Array.isArray(n)?n.includes(t):n===t}function ut(n,t){const e=he(t);return he(n).forEach(i=>{$(e,i)||e.push(i)}),e}function ht(n,t){return he(t).filter(e=>!$(n,e))}class pt{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=de(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=ue(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class v extends pt{get formDirective(){return null}get path(){return null}}class F extends pt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ft{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let mt=(()=>{class n extends ft{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(F,2))},n.\u0275dir=r.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,o){2&e&&r.ekj("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[r.qOj]}),n})();const B="VALID",X="INVALID",G="PENDING",P="DISABLED";function Z(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class vt{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===B}get invalid(){return this.status===X}get pending(){return this.status==G}get disabled(){return this.status===P}get enabled(){return this.status!==P}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(ut(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(ut(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(ht(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(ht(t,this._rawAsyncValidators))}hasValidator(t){return $(this._rawValidators,t)}hasAsyncValidator(t){return $(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=G,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=P,this.errors=null,this._forEachChild(o=>{o.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(o=>o(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=B,this._forEachChild(o=>{o.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===B||this.status===G)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?P:B}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=G,this._hasOwnPendingAsyncValidator=!0;const e=nt(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(o=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(o,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((o,i)=>o&&o._find(i),this)}getError(t,e){const o=e?this.get(e):this;return o&&o.errors?o.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.vpe,this.statusChanges=new r.vpe}_calculateStatus(){return this._allControlsDisabled()?P:this.errors?X:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(G)?G:this._anyControlsHaveStatus(X)?X:B}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Z(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function Pn(n){return Array.isArray(n)?de(n):n||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function kn(n){return Array.isArray(n)?ue(n):n||null}(this._rawAsyncValidators)}}const Q=new r.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>K}),K="always";function k(n,t,e=K){(function ye(n,t){const e=function ct(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(lt(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const o=function dt(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(lt(o,t.asyncValidator)):"function"==typeof o&&n.setAsyncValidators([o]);const i=()=>n.updateValueAndValidity();ne(t._rawValidators,i),ne(t._rawAsyncValidators,i)})(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(n.disabled),function Ln(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Ct(n,t)})}(n,t),function qn(n,t){const e=(o,i)=>{t.valueAccessor.writeValue(o),i&&t.viewToModelUpdate(o)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function jn(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Ct(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function Hn(n,t){if(t.valueAccessor.setDisabledState){const e=o=>{t.valueAccessor.setDisabledState(o)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function ne(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Ct(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Vt(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function bt(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Dt=class extends vt{constructor(t=null,e,o){super(function me(n){return(Z(n)?n.validators:n)||null}(e),function ge(n,t){return(Z(t)?t.asyncValidators:n)||null}(o,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Z(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=bt(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(o=>o(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Vt(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Vt(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){bt(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},Kn={provide:F,useExisting:(0,r.Gpc)(()=>Ve)},Ft=(()=>Promise.resolve())();let Ve=(()=>{class n extends F{constructor(e,o,i,s,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new Dt,this._registered=!1,this.name="",this.update=new r.vpe,this._parent=e,this._setValidators(o),this._setAsyncValidators(i),this.valueAccessor=function Se(n,t){if(!t)return null;let e,o,i;return Array.isArray(t),t.forEach(s=>{s.constructor===ce?e=s:function Wn(n){return Object.getPrototypeOf(n.constructor)===N}(s)?o=s:i=s}),i||o||e||null}(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const o=e.name.previousValue;this.formDirective.removeControl({name:o,path:this._getPath(o)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function Ce(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){k(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){Ft.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const o=e.isDisabled.currentValue,i=0!==o&&(0,r.D6c)(o);Ft.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function ee(n,t){return[...t.path,n]}(e,this._parent):[e]}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(v,9),r.Y36(g,10),r.Y36(M,10),r.Y36(b,10),r.Y36(r.sBO,8),r.Y36(Q,8))},n.\u0275dir=r.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r._Bn([Kn]),r.qOj,r.TTD]}),n})(),wt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({}),n})();const uo={provide:b,useExisting:(0,r.Gpc)(()=>re),multi:!0};function It(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let re=(()=>{class n extends N{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const i=It(this._getOptionId(e),e);this.setProperty("value",i)}registerOnChange(e){this.onChange=o=>{this.value=this._getOptionValue(o),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const o of this._optionMap.keys())if(this._compareWith(this._optionMap.get(o),e))return o;return null}_getOptionValue(e){const o=function ho(n){return n.split(":")[0]}(e);return this._optionMap.has(o)?this._optionMap.get(o):e}}return n.\u0275fac=function(){let t;return function(o){return(t||(t=r.n5z(n)))(o||n)}}(),n.\u0275dir=r.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,o){1&e&&r.NdJ("change",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([uo]),r.qOj]}),n})(),Bt=(()=>{class n{constructor(e,o,i){this._element=e,this._renderer=o,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(It(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(re,9))},n.\u0275dir=r.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const po={provide:b,useExisting:(0,r.Gpc)(()=>Me),multi:!0};function Pt(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let Me=(()=>{class n extends N{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let o;if(this.value=e,Array.isArray(e)){const i=e.map(s=>this._getOptionId(s));o=(s,a)=>{s._setSelected(i.indexOf(a.toString())>-1)}}else o=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(o)}registerOnChange(e){this.onChange=o=>{const i=[],s=o.selectedOptions;if(void 0!==s){const a=s;for(let l=0;l<a.length;l++){const d=this._getOptionValue(a[l].value);i.push(d)}}else{const a=o.options;for(let l=0;l<a.length;l++){const c=a[l];if(c.selected){const d=this._getOptionValue(c.value);i.push(d)}}}this.value=i,e(i)}}_registerOption(e){const o=(this._idCounter++).toString();return this._optionMap.set(o,e),o}_getOptionId(e){for(const o of this._optionMap.keys())if(this._compareWith(this._optionMap.get(o)._value,e))return o;return null}_getOptionValue(e){const o=function fo(n){return n.split(":")[0]}(e);return this._optionMap.has(o)?this._optionMap.get(o)._value:e}}return n.\u0275fac=function(){let t;return function(o){return(t||(t=r.n5z(n)))(o||n)}}(),n.\u0275dir=r.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,o){1&e&&r.NdJ("change",function(s){return o.onChange(s.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([po]),r.qOj]}),n})(),kt=(()=>{class n{constructor(e,o,i){this._element=e,this._renderer=o,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(Pt(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(Pt(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(Me,9))},n.\u0275dir=r.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),Vo=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({imports:[wt]}),n})(),Do=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Q,useValue:e.callSetDisabledState??K}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({imports:[Vo]}),n})();var Eo=m(804),Mo=m(729);const Fo=["action"],Ro=["selectDevice"];function wo(n,t){if(1&n&&(r.TgZ(0,"option",6),r._uU(1),r.qZA()),2&n){const e=t.$implicit;r.Q6J("value",e.deviceId),r.xp6(1),r.Oqu(e.label)}}let Oo=(()=>{class n{constructor(e,o){this.router=e,this.textService=o,this.title="qr-code-reader",this.selectedDevice=""}ngAfterViewInit(){this.qrcodeComponent?.devices.pipe((0,_n.h)(e=>e.length>0),(0,yn.q)(1)).subscribe(e=>{const o=e.find(i=>i.label.includes("back"));o&&this.selectDevice&&(this.selectedDevice=o.deviceId,this.qrcodeComponent?.playDevice(o.deviceId))}).add(()=>{""===this.selectedDevice&&(this.selectedDevice=this.qrcodeComponent?.devices.value[0].deviceId??"")}),this.qrcodeComponent?.start()}onDetectQRCodeEvent(e,o){const i=e[0].value;i&&(o.pause(),this.textService.text=i,this.router.navigateByUrl("only-text"))}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(Eo.F0),r.Y36(Mo.N))},n.\u0275cmp=r.Xpm({type:n,selectors:[["app-root"]],viewQuery:function(e,o){if(1&e&&(r.Gf(Fo,5),r.Gf(Ro,5)),2&e){let i;r.iGM(i=r.CRH())&&(o.qrcodeComponent=i.first),r.iGM(i=r.CRH())&&(o.selectDevice=i.first)}},standalone:!0,features:[r.jDz],decls:7,vars:2,consts:[["for","select-device"],["id","select-device","autofocus","","tabindex","1","name","Selecionar c\xe2mera",3,"ngModel","ngModelChange","change"],["selectDevice",""],[3,"value",4,"ngFor","ngForOf"],[3,"event"],["action","scanner"],[3,"value"]],template:function(e,o){if(1&e){const i=r.EpF();r.TgZ(0,"label",0),r._uU(1,"Selecionar c\xe2mera:"),r.qZA(),r.TgZ(2,"select",1,2),r.NdJ("ngModelChange",function(a){return o.selectedDevice=a})("change",function(){r.CHM(i);const a=r.MAs(3),l=r.MAs(6);return r.KtG(l.playDevice(a.value))}),r.YNc(4,wo,2,2,"option",3),r.qZA(),r.TgZ(5,"ngx-scanner-qrcode",4,5),r.NdJ("event",function(a){r.CHM(i);const l=r.MAs(6);return r.KtG(o.onDetectQRCodeEvent(a,l))}),r.qZA()}if(2&e){const i=r.MAs(6);r.xp6(2),r.Q6J("ngModel",o.selectedDevice),r.xp6(2),r.Q6J("ngForOf",i.devices.value)}},dependencies:[Y.ez,Y.sg,gn,pn,Do,Bt,kt,re,mt,Ve]}),n})()}}]);